---
title: ConEmu Environment Variables - Переменные Окружения

description: "Список переменных окружения используемых в ConEmu.
  Экспорт переменных в родительские процессы консолей.
  Трюки с системным временем и кодовыми страницами консоли.
  Примеры использования."
---

<!-- Content starts -->

<h1 id="h0">Environment variables</h1>
<p><ul><li><a href="#List_of_environment_variables_set_by_ConEmu">Список переменных окружения устанавливаемых в ConEmu</a></li>
	<li><a href="#PATH_modifications">Изменения PATH</a></li>
	<li><a href="#Debug_purposed_variables">Debug purposed variables</a></li>
	<li><a href="#Export_variables">Export variables</a></li>
	<ul><li><a href="#Full_syntax_of_Export_command">Full syntax of Export command</a></li></ul>
	<li><a href="#Disabling_hooks_temporarily">Disabling hooks temporarily</a></li>
	<li><a href="#Cheating_system_time">Cheating system time</a></li>
	<li><a href="#ConEmuCpCvt">ConEmuCpCvt - hack to force output CP conversion</li>
	<li><a href="#ConEmuDefaultCp">ConEmuDefaultCp - hack to change output CP if you don't want to use ‘chcp’</a></li></ul>
</p>

<h2><a name="List_of_environment_variables_set_by_ConEmu"></a>Список переменных окружения устанавливаемых в ConEmu<a href="#List_of_environment_variables_set_by_ConEmu" class="section_anchor"></a></h2>
<p><table class="wikitable">
<tr><td style="border: 1px solid #ccc; padding: 5px;"> <strong>Имя</strong> </td><td style="border: 1px solid #ccc; padding: 5px;"> <strong>Пример</strong> </td><td style="border: 1px solid #ccc; padding: 5px;"> <strong>Описание</strong> </td></tr>
<tr><td style="border: 1px solid #ccc; padding: 5px;"> ConEmuDir </td><td style="border: 1px solid #ccc; padding: 5px;"> <code>C:\ConEmu</code> </td><td style="border: 1px solid #ccc; padding: 5px;"> папка, содержащая ConEmu.exe </td></tr>
<tr><td style="border: 1px solid #ccc; padding: 5px;"> ConEmuDrive </td><td style="border: 1px solid #ccc; padding: 5px;"> <code>C:</code> </td><td style="border: 1px solid #ccc; padding: 5px;"> диск с двоеточием, содержащий ConEmu.exe </td></tr>
<tr><td style="border: 1px solid #ccc; padding: 5px;"> ConEmuBaseDir </td><td style="border: 1px solid #ccc; padding: 5px;"> <code>C:\ConEmu\ConEmu</code> </td><td style="border: 1px solid #ccc; padding: 5px;"> папка, содержащая ConEmuC.exe </td></tr>
<tr><td style="border: 1px solid #ccc; padding: 5px;"> ConEmuWorkDir </td><td style="border: 1px solid #ccc; padding: 5px;"> <code>C:\Users</code> </td><td style="border: 1px solid #ccc; padding: 5px;"> рабочая папка, где был запущен ваш shell </td></tr>
<tr><td style="border: 1px solid #ccc; padding: 5px;"> ConEmuWorkDrive </td><td style="border: 1px solid #ccc; padding: 5px;"> <code>C:</code> </td><td style="border: 1px solid #ccc; padding: 5px;"> диск с двоеточием, где был запущен ваш shell </td></tr>
<tr><td style="border: 1px solid #ccc; padding: 5px;"> ConEmuArgs </td><td style="border: 1px solid #ccc; padding: 5px;"> <i>вариант</i> </td><td style="border: 1px solid #ccc; padding: 5px;"> аргументы, с которыми был запущен ConEmu.exe </td></tr>
<tr><td style="border: 1px solid #ccc; padding: 5px;"> ConEmuConfig </td><td style="border: 1px solid #ccc; padding: 5px;"> <i>вариант</i> </td><td style="border: 1px solid #ccc; padding: 5px;"> имя активной конфигурации, читайте про ключ <code>/config</code> </td></tr>
<tr><td style="border: 1px solid #ccc; padding: 5px;"> ConEmuBuild </td><td style="border: 1px solid #ccc; padding: 5px;"> <code>141126c</code> </td><td style="border: 1px solid #ccc; padding: 5px;"> текущий билд ConEmu </td></tr>
<tr><td style="border: 1px solid #ccc; padding: 5px;"> ConEmuPID </td><td style="border: 1px solid #ccc; padding: 5px;"> <i>число</i> </td><td style="border: 1px solid #ccc; padding: 5px;"> PID (ИД процесса) ConEmu GUI </td></tr>
<tr><td style="border: 1px solid #ccc; padding: 5px;"> ConEmuServerPID </td><td style="border: 1px solid #ccc; padding: 5px;"> <i>number</i> </td><td style="border: 1px solid #ccc; padding: 5px;"> PID (ИД процесса) ConEmuC сервера </td></tr>
<tr><td style="border: 1px solid #ccc; padding: 5px;"> ConEmuHWND </td><td style="border: 1px solid #ccc; padding: 5px;"> <code>0x8HEXDGTS</code> </td><td style="border: 1px solid #ccc; padding: 5px;"> дескриптор главного окна ConEmu </td></tr>
<tr><td style="border: 1px solid #ccc; padding: 5px;"> ConEmuDrawHWND </td><td style="border: 1px solid #ccc; padding: 5px;"> <code>0x8HEXDGTS</code> </td><td style="border: 1px solid #ccc; padding: 5px;"> дескриптор дескриптор окна виртуальной консоли (дочернее окно ConEmu), окно отрисовки текста консоли </td></tr>
<tr><td style="border: 1px solid #ccc; padding: 5px;"> ConEmuBackHWND </td><td style="border: 1px solid #ccc; padding: 5px;"> <code>0x8HEXDGTS</code> </td><td style="border: 1px solid #ccc; padding: 5px;"> подложка для окна отрисовки, может быть больше окна отрисовки при наличии «padding» или «scrollbars» </td></tr>
<tr><td style="border: 1px solid #ccc; padding: 5px;"> ConEmuIsAdmin </td><td style="border: 1px solid #ccc; padding: 5px;"> <code>ADMIN</code> или не задана </td><td style="border: 1px solid #ccc; padding: 5px;"> устанавливается для тех табов/сплитов, которые запущены с повышенными полномочиями (UAC) </td></tr>
<tr><td style="border: 1px solid #ccc; padding: 5px;"> ConEmuANSI </td><td style="border: 1px solid #ccc; padding: 5px;"> <code>ON</code> или <code>OFF</code> </td><td style="border: 1px solid #ccc; padding: 5px;"> установлено в <code>ON</code> если доступен «ANSI X3.64» </td></tr>
<tr><td style="border: 1px solid #ccc; padding: 5px;"> <a href="ConEmuEnvironment.html#Disabling_hooks_temporarily">ConEmuHooks</a> </td><td style="border: 1px solid #ccc; padding: 5px;"> <code>Enabled</code>|<code>OFF</code>|<code>NOARG</code>|<code>NOSTART</code> </td><td style="border: 1px solid #ccc; padding: 5px;"> можно временно отключить установку inject-ов на время запуска длинных команд или инициализационных скриптов </td></tr>
<tr><td style="border: 1px solid #ccc; padding: 5px;"> <a href="ConEmuEnvironment.html#Cheating_system_time">ConEmuFakeDT</a> </td><td style="border: 1px solid #ccc; padding: 5px;"> <code>2014-12-31</code> </td><td style="border: 1px solid #ccc; padding: 5px;"> that will cheat system and local current time for console processes </td></tr>
<tr><td style="border: 1px solid #ccc; padding: 5px;"> <a href="GuiMacro.html#Far3-pre-Lua">ConEmuMacroResult</a> </td><td style="border: 1px solid #ccc; padding: 5px;"> <i>вариант</i> </td><td style="border: 1px solid #ccc; padding: 5px;"> устанавливается из плагина ConEmu&#x27;s Far Manager после выполнения <a href="GuiMacro.html">GUI Macro</a> </td></tr>
<tr><td style="border: 1px solid #ccc; padding: 5px;"> <a href="ConEmuEnvironment.html#ConEmuCpCvt">ConEmuCpCvt</a> </td><td style="border: 1px solid #ccc; padding: 5px;"> perl.exe:1252:1251 </td><td style="border: 1px solid #ccc; padding: 5px;"> изменить кодовую страницу выводимого текста </td></tr>
<tr><td style="border: 1px solid #ccc; padding: 5px;"> <a href="ConEmuEnvironment.html#ConEmuDefaultCp">ConEmuDefaultCp</a> </td><td style="border: 1px solid #ccc; padding: 5px;"> 1251 </td><td style="border: 1px solid #ccc; padding: 5px;"> установить кодовую страницу вместо использования chcp </td></tr> </table></p>

<h2><a name="PATH_modifications"></a>Изменения PATH<a href="#PATH_modifications" class="section_anchor"></a></h2>
<p><a href="SettingsComspec.html">Settings page ComSpec</a> has an options ‘Add %ConEmuDir% to %PATH%’ and ‘Add %ConEmuBaseDir% to %PATH%’. </p>
<p>They are turned on by default and allows to easily run executables and scripts and macros from ConEmu&#x27;s folders. For example: </p>
<pre class="prettyprint">ConEmuC -GuiMacro Progress 3

or

csudo dism.exe /online /enable-feature /featurename:NetFX3 /All /Source:D:\sources\sxs /LimitAccess</pre>

<h2><a name="Debug_purposed_variables"></a>Debug purposed variables<a href="#Debug_purposed_variables" class="section_anchor"></a></h2>
<p><table class="wikitable">
<tr><td style="border: 1px solid #ccc; padding: 5px;"> <strong>Name</strong> </td><td style="border: 1px solid #ccc; padding: 5px;"> <strong>Example</strong> </td><td style="border: 1px solid #ccc; padding: 5px;"> <strong>Description</strong> </td></tr>
<tr><td style="border: 1px solid #ccc; padding: 5px;"> <code>ConEmuSleepIndicator</code> </td><td style="border: 1px solid #ccc; padding: 5px;"> <code>TITLE</code>, <code>NUM</code> or <code>OFF</code> </td><td style="border: 1px solid #ccc; padding: 5px;"> Turns on monitoring feature of ‘Sleep in background’, when <code>ConEmuSleepIndicator=NUM</code> ConEmu will turn off NumLock when going sleep and turn on NumLock when full active back, when <code>ConEmuSleepIndicator=TITLE</code> - state will be shown in the TabBar or window title. </td></tr>
<tr><td style="border: 1px solid #ccc; padding: 5px;"> <code>ConEmuReportExe</code> </td><td style="border: 1px solid #ccc; padding: 5px;"> <code>perl.exe</code> </td><td style="border: 1px solid #ccc; padding: 5px;"> Shows message box like ‘perl.exe loaded’ when <code>perl.exe</code> started inside ConEmu tab; option ‘Inject <a href="ConEmuHk.html">ConEmuHk</a>’ must be enabled </td></tr> </table></p>

<h2><a name="Export_variables"></a>Export variables<a href="#Export_variables" class="section_anchor"></a></h2>
<p>When you start new console - it inherits environment strings (<code>%PATH%</code> also) from parent process (ConEmu GUI). </p>
<p>When you change %PATH% in your shell - it applies to this shell and its children processes (that is started in current console/tab). </p>
<p>If you need to fixate this temporarily environment changes - you may execute </p>
<pre class="prettyprint">ConEmuC /export PATH</pre>
<p>This will «copy» your current <code>%PATH%</code> value to ConEmu GUI and it will be applied to all new ConEmu&#x27;s consoles. </p>

<h3><a name="Full_syntax_of_Export_command"></a>Full syntax of Export command<a href="#Full_syntax_of_Export_command" class="section_anchor"></a></h3>
<pre class="prettyprint">ConEmuC /EXPORT[=CON|ALL] [Var1 [Var2 [...]]]
ConEmuC /export[=CON|ALL] [Var1 [Var2 [...]]]
  VarN        - may contains one trailing/middle asterisk (sort of filemask support).
  /export     - export to all processes of current console and ConEmu GUI
  /export=CON - export to all processes of current console only
  /export=GUI - export to ConEmu GUI only
  /export=ALL - export to all processes of opened tabs and ConEmu GUI</pre>
<ul><li>Note! «Inject ConEmuHk» required to set variables. </li>
<li>Some shells may ignores environment changes by <code>/EXPORT=ALL</code> because of their features. </li>
<li>Shells comments </li><ul><li>«Far Manager» &amp; «TCC/LE» - OK; </li>
<li>«cmd» - fails partially (required to run smth from active cmd, for example &quot;cmd /k exit&quot;, to «apply» changes); </li>
<li>«bash» - fails completely (seems, it does not support outside changing of env.vars). </li></ul></ul>

<h2><a name="Disabling_hooks_temporarily"></a>Disabling hooks temporarily<a href="#Disabling_hooks_temporarily" class="section_anchor"></a></h2>
<p>You may temporarily disable injects when running ‘long’ batches or initialization scripts: </p>
<pre class="prettyprint">cmd /k set ConEmuHooks=OFF &amp; &quot;C:\Program Files\Microsoft SDKs\Windows\v7.1\Bin\SetEnv.cmd&quot; -new_console:sV -new_console:t:SDK &amp; set ConEmuHooks=</pre>
<p>Actually, <code>ConEmuHooks</code> may be set of ‘<code>OFF</code>’,‘<code>NOARG</code>’,‘<code>NOSTART</code>’ or simple ‘<code>Enabled</code>’. So if you want temporarily disable processing of <code>-new_console</code> and <code>start</code> (which both are forcing command into the new <a href="Tabs.html">ConEmu tab</a>) you may set the following: </p>
<pre class="prettyprint">set ConEmuHooks=NOARG,NOSTART</pre>

<h2><a name="Cheating_system_time"></a>Cheating system time<a href="#Cheating_system_time" class="section_anchor"></a></h2>
<p>Environment variable &quot;ConEmuFakeDT&quot;. That will cheat system and local current time for console processes. Use carefully! Console applications will think that time was freezed! «Inject <a href="ConEmuHk.html">ConEmuHk</a>» must be on! Some examples (cmd): </p>
<pre class="prettyprint">set ConEmuFakeDT=%DATE% %TIME%
set ConEmuFakeDT=2013-12-31T23:59:59.99
set ConEmuFakeDT=2013-01-31 9:0:0
set ConEmuFakeDT=2013-11-30</pre>

<h2><a name="ConEmuCpCvt"></a>ConEmuCpCvt</h2>
<p>Codepage hack to force output CP conversion. </p>
<p>If some command uses wrong CP while converting ANSI to Unicode (the example may be perl.exe from &quot;<code>git add -p</code>&quot;) set variable to correct its output. Use asterisk for all apps. This hack affects ONLY <code>WriteConsoleW</code> function calls. </p>
<pre class="prettyprint">Format:
&lt;exename&gt;:&lt;badcp&gt;:&lt;goodcp&gt;[;&lt;exename&gt;:&lt;badcp&gt;:&lt;goodcp&gt;[...]]
Example:
set ConEmuCpCvt=perl.exe:1252:1251;*:850:866;</pre>

<h2><a name="ConEmuDefaultCp"></a>ConEmuDefaultCp</h2>
<p>Codepage hack to change output CP if you don't want to use chcp. </p>
<p>If you can&#x27;t use &quot;<code>chcp &lt;codepage&gt;</code>&quot; to change whole console CP output, you may change it using environment variable ConEmuDefaultCp. It will affect only <code>WriteFile</code> and <code>WriteConsoleA</code> functions. So, if you need to run several apps in one console simultaneously... </p>
<pre class="prettyprint">set ConEmuDefaultCp=1251
ConEmuC -fork -c App1.exe
set ConEmuDefaultCp=866
ConEmuC -fork -c App2.exe
set ConEmuDefaultCp=</pre>

<!-- Content ends -->
